services:
  - docker
env:
  - TAGS=($NAME $NAME-$TRAVIS_BRANCH $NAME-$TRAVIS_BUILD_NUMBER)
jobs:
  include:
    -
      stage: build
      script:
        - printf "$DOCKER_USERNAME/$REPO:%s\n" ${TAGS[@]} | xargs -I {} docker build {} .
      after_script:
        - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
        - printf  "$DOCKER_USERNAME/$REPO:%s\n" ${TAGS[@]} | xargs docker push
stages:
  -
    name: build
